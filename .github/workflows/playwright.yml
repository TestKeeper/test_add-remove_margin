name: üß™ Run Playwright tests

on:
  workflow_dispatch:  # —Ç–æ–ª—å–∫–æ —Ä—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ GitHub UI

jobs:
  test:
    runs-on: ubuntu-latest

    steps:
      - name: üì• Checkout –∫–æ–¥–∞
        uses: actions/checkout@v3

      - name: üü¢ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Node.js
        uses: actions/setup-node@v3
        with:
          node-version: 20

      - name: üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
        run: npm install

      - name: üß© –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –±—Ä–∞—É–∑–µ—Ä–æ–≤ Playwright
        run: npx playwright install --with-deps

      # –£–¥–∞–ª–∏, –µ—Å–ª–∏ dotenv –Ω–µ –Ω—É–∂–µ–Ω:
      - name: üåø –£—Å—Ç–∞–Ω–æ–≤–∫–∞ dotenv (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
        run: npm install dotenv

      - name: üöÄ –ó–∞–ø—É—Å–∫ Playwright —Ç–µ—Å—Ç–æ–≤
        run: npx playwright test
        # –£–¥–∞–ª–∏ –∏–ª–∏ –æ—Å—Ç–∞–≤—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –µ—Å–ª–∏ –æ–Ω–∏ –Ω—É–∂–Ω—ã
        env:
          TG_BOT_TOKEN: ${{ secrets.TG_BOT_TOKEN }}
          TG_CHAT_ID: ${{ secrets.TG_CHAT_ID }}
